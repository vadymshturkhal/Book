## 2.3. Контекст и лексическое окружение

> Область видимости (Scope) — часть кода, из которой "виден" идентификатор.

```js
const showScope = () => {
  const level = 1;
  {
    const level = 2;
    console.log(level); // 2
  }
  console.log(level); // 1
};

showScope();
```

В современном стандарте `JavaScript` область видимости порождается функцией или любым блоком операторов, имеющим фигурные скобки `{}` или операторами ветвления и циклов, в которых могут быть блоки, но скобки `{}` могут и опускаться. В `Python` scope порождается только функциями. Сравните этот код с предыдущим примером:

```py
def show_scope():
    level = 1
    if level == 1:
        level = 2
        print(level)  # 2
    print(level)  # 2

show_scope()
```

> Лексический контекст (Lexical environment) — набор идентификаторов, связанных с определенными значениями в рамках функции или блока кода (в том числе блоков циклов, условий и т.д.).

Лексический контекст или лексическое окружение имеют вложенность, т.е. кроме локальных переменных в блоке, порождающем контекст, есть и вышестоящий блок со своим контекстом. Если идентификатор определен в вышестоящем контексте, то он виден во всех вложенных, если только не происходит перекрытия имен. Перекрытие — это случай, когда во вложенном контексте заново объявлен идентификатор, уже имеющийся во внешнем, тогда значение из внешнего контекста становится недоступно и мы можем доступаться только к внутреннему.

> Объектный контекст функции — объект, связанный со служебным идентификатором `this`.

Все функции, кроме стрелочных, могут быть связаны с объектным контекстом. Объект связан с `this`, если функция является методом этого объекта, если функция привязана к нему через `bind` или вызвана через `apply` и `call`.

> Глобальный контекст (Global context) — глобальный объект-справочник.

Если идентификатор не находится ни в одном из вложенных лексических контекстов, то будет выполнен его поиск в глобальном контексте (global, window, sandbox).
